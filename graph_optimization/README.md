# Graph-Based Sensor Fusion
In this project, we loosely couple the wheel encoder information into the system based on the method mentioned in the methodology section. The sensor fusion is off-line and is used to process the ORB-SLAM3 generates estimated poses. The first 726 estimated poses are used to build the value instances in the factor graph, and the corresponding odometry information is used to construct the factors. The first pose generated by ORB-SLAM3 is at the origin $X_0$ ($x_0,y_0,z_0,{roll}_0,{pitch}_0,{heading}_0$ = 0,0,0,0,0,0). However, the ground-truth pose of the corresponding timestamp is not at the origin. Therefore, we first use the corresponding ground-truth pose $ X_{gt0} (x_{gt0},y_{gt0},z_{gt0},{roll}_{gt0},{pitch}_{gt0},{heading}_{gt0})$ and $X_0$ to generate the transformation matrix $T$. Then, we transform the estimated poses to make the estimated poses and the ground-truth poses in the same reference coordinate by following the equation 
\begin{equation}
\mathrm{X_t'}=\mathrm{T}^{-1} \mathrm{X_t}
\end{equation}
Afterward, we use a nonlinear factor graph as our graph and use the ISAM2 solver to optimize the trajectory incrementally.
